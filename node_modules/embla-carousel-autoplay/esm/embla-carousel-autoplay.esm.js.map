{"version":3,"file":"embla-carousel-autoplay.esm.js","sources":["../src/components/Options.ts","../src/components/utils.ts","../src/components/Autoplay.ts"],"sourcesContent":["import { CreateOptionsType, EmblaCarouselType } from 'embla-carousel'\n\nexport type DelayOptionType =\n  | number\n  | ((scrollSnaps: number[], emblaApi: EmblaCarouselType) => number[])\n\nexport type RootNodeType =\n  | null\n  | ((emblaRoot: HTMLElement) => HTMLElement | null)\n\nexport type OptionsType = CreateOptionsType<{\n  delay: DelayOptionType\n  instant: boolean\n  defaultInteraction: boolean\n  stopOnLastSnap: boolean\n  rootNode: RootNodeType\n}>\n\nexport const defaultOptions: OptionsType = {\n  active: true,\n  breakpoints: {},\n  delay: 4000,\n  instant: false,\n  defaultInteraction: true,\n  stopOnLastSnap: false,\n  rootNode: null\n}\n","import { EmblaCarouselType } from 'embla-carousel/components/EmblaCarousel'\nimport { DelayOptionType, RootNodeType } from './Options'\n\nexport function normalizeDelay(\n  emblaApi: EmblaCarouselType,\n  delay: DelayOptionType\n): number[] {\n  const scrollSnaps = emblaApi.snapList()\n\n  if (typeof delay === 'number') {\n    return scrollSnaps.map(() => delay)\n  }\n  return delay(scrollSnaps, emblaApi)\n}\n\nexport function getAutoplayRootNode(\n  emblaApi: EmblaCarouselType,\n  rootNode: RootNodeType\n): HTMLElement {\n  const emblaRootNode = emblaApi.rootNode()\n  return (rootNode && rootNode(emblaRootNode)) || emblaRootNode\n}\n","import { OptionsType, defaultOptions } from './Options'\nimport { getAutoplayRootNode, normalizeDelay } from './utils'\nimport {\n  CreatePluginType,\n  OptionsHandlerType,\n  EmblaCarouselType,\n  EmblaEventModelType\n} from 'embla-carousel'\n\ntype AutoplayInteractionType = {\n  interaction:\n    | 'pointerdown'\n    | 'pointerup'\n    | 'mouseenter'\n    | 'mouseleave'\n    | 'slidefocus'\n    | 'slidefocusout'\n  originalEvent:\n    | EmblaEventModelType<'pointerdown'>\n    | EmblaEventModelType<'pointerup'>\n    | EmblaEventModelType<'slidefocus'>\n    | MouseEvent\n    | FocusEvent\n  isMouseOver: boolean\n  isPointerDown: boolean\n}\n\ndeclare module 'embla-carousel' {\n  interface EmblaPluginsType {\n    autoplay: AutoplayType\n  }\n\n  interface EmblaEventListType {\n    'autoplay:play': null\n    'autoplay:stop': null\n    'autoplay:interaction': AutoplayInteractionType\n    'autoplay:select': EmblaEventListType['select']\n    'autoplay:timerset': { startTime: number }\n    'autoplay:timerstopped': { stopTime: number }\n  }\n}\n\nexport type AutoplayType = CreatePluginType<\n  {\n    play: (instant?: boolean) => void\n    stop: () => void\n    reset: () => void\n    pause: () => void\n    isPlaying: () => boolean\n    timeUntilNext: () => number | null\n  },\n  OptionsType\n>\n\nexport type AutoplayOptionsType = AutoplayType['options']\n\nfunction Autoplay(userOptions: AutoplayOptionsType = {}): AutoplayType {\n  let options: OptionsType\n  let emblaApi: EmblaCarouselType\n  let isSsr = false\n  let destroyed = false\n\n  let delay: ReturnType<EmblaCarouselType['snapList']>\n  let pauseDelay: null | number = null\n  let timerStartTime: null | number = null\n  let timerId = 0\n  let autoplayRunning = false\n  let playOnDocumentVisible = false\n  let instant = false\n  let isMouseOver = false\n  let isPointerDown = false\n  let onInteraction = onDefaultInteraction\n\n  function pluginIsActive(): boolean {\n    if (isSsr) return false\n    if (destroyed) return false\n    return options.active\n  }\n\n  function init(\n    emblaApiInstance: EmblaCarouselType,\n    optionsHandler: OptionsHandlerType\n  ): void {\n    emblaApi = emblaApiInstance\n\n    const { mergeOptions, optionsAtMedia } = optionsHandler\n    const optionsBase = mergeOptions(defaultOptions, Autoplay.globalOptions)\n    const allOptions = mergeOptions(optionsBase, userOptions)\n\n    destroyed = false\n    options = optionsAtMedia(allOptions)\n    isSsr = emblaApi.internalEngine().isSsr\n\n    if (!pluginIsActive()) return\n    if (emblaApi.snapList().length <= 1) return\n\n    instant = options.instant\n    delay = normalizeDelay(emblaApi, options.delay)\n    onInteraction = options.defaultInteraction\n      ? onDefaultInteraction\n      : onCustomInteraction\n\n    const { eventStore, nodeHandler } = emblaApi.internalEngine()\n    const { ownerDocument } = nodeHandler\n    const root = getAutoplayRootNode(emblaApi, options.rootNode)\n\n    if (ownerDocument) {\n      eventStore.add(ownerDocument, 'visibilitychange', onVisibilityChange)\n    }\n\n    emblaApi.on('pointerdown', onInteraction)\n    emblaApi.on('pointerup', onInteraction)\n    emblaApi.on('slidefocus', onInteraction)\n\n    eventStore.add(root, 'mouseenter', (event) =>\n      onInteraction(emblaApi, event, event.type)\n    )\n    eventStore.add(root, 'mouseleave', (event) =>\n      onInteraction(emblaApi, event, event.type)\n    )\n    eventStore.add(emblaApi.containerNode(), 'focusout', (event) =>\n      onInteraction(emblaApi, event, 'slidefocusout')\n    )\n  }\n\n  function destroy(): void {\n    if (!pluginIsActive()) return\n\n    emblaApi\n      .off('pointerdown', onInteraction)\n      .off('pointerup', onInteraction)\n      .off('slidefocus', onInteraction)\n\n    stopAutoplay()\n    destroyed = true\n    autoplayRunning = false\n  }\n\n  function setTimer(): void {\n    const { ownerWindow } = emblaApi.internalEngine().nodeHandler\n    if (!ownerWindow) return\n\n    const startTime = new Date().getTime()\n    const event = emblaApi.createEvent('autoplay:timerset', { startTime })\n\n    ownerWindow.clearTimeout(timerId)\n    timerId = ownerWindow.setTimeout(next, getDelay())\n    timerStartTime = startTime\n    event.emit()\n  }\n\n  function clearTimer(): void {\n    const { ownerWindow } = emblaApi.internalEngine().nodeHandler\n    if (!ownerWindow) return\n\n    const stopTime = new Date().getTime()\n    const event = emblaApi.createEvent('autoplay:timerstopped', { stopTime })\n\n    ownerWindow.clearTimeout(timerId)\n    timerId = 0\n    timerStartTime = null\n    event.emit()\n  }\n\n  function startAutoplay(): void {\n    if (!pluginIsActive()) return\n    if (documentIsHidden()) {\n      playOnDocumentVisible = true\n      return\n    }\n\n    if (!autoplayRunning) {\n      const event = emblaApi.createEvent('autoplay:play', null)\n      event.emit()\n    }\n\n    setTimer()\n    autoplayRunning = true\n  }\n\n  function stopAutoplay(): void {\n    if (!pluginIsActive()) return\n\n    if (autoplayRunning) {\n      const event = emblaApi.createEvent('autoplay:stop', null)\n      event.emit()\n    }\n\n    clearTimer()\n    autoplayRunning = false\n  }\n\n  function onVisibilityChange(): void {\n    if (documentIsHidden()) {\n      playOnDocumentVisible = autoplayRunning\n      return stopAutoplay()\n    }\n\n    if (playOnDocumentVisible) startAutoplay()\n  }\n\n  function documentIsHidden(): boolean {\n    const { ownerDocument } = emblaApi.internalEngine().nodeHandler\n    if (!ownerDocument) return false\n    return ownerDocument.visibilityState === 'hidden'\n  }\n\n  function onDefaultInteraction(\n    _: EmblaCarouselType,\n    originalEvent: AutoplayInteractionType['originalEvent'],\n    customType?: AutoplayInteractionType['interaction']\n  ): void {\n    const type = <AutoplayInteractionType['interaction']>originalEvent.type\n    const interaction = customType || type\n\n    if (interaction === 'slidefocus') stopAutoplay()\n    if (interaction === 'pointerdown') stopAutoplay()\n  }\n\n  function onCustomInteraction(\n    _: EmblaCarouselType,\n    originalEvent: AutoplayInteractionType['originalEvent'],\n    customType?: AutoplayInteractionType['interaction']\n  ): void {\n    const type = <AutoplayInteractionType['interaction']>originalEvent.type\n    const interaction = customType || type\n    if (interaction === 'mouseenter') isMouseOver = true\n    if (interaction === 'mouseleave') isMouseOver = false\n    if (interaction === 'pointerdown') isPointerDown = true\n    if (interaction === 'pointerup') isPointerDown = false\n\n    const event = emblaApi.createEvent('autoplay:interaction', {\n      interaction,\n      originalEvent,\n      isMouseOver,\n      isPointerDown\n    })\n\n    event.emit()\n  }\n\n  function play(instantOverride?: boolean): void {\n    instant = instantOverride ?? instant\n    startAutoplay()\n  }\n\n  function stop(): void {\n    if (autoplayRunning) stopAutoplay()\n  }\n\n  function reset(): void {\n    if (autoplayRunning) startAutoplay()\n  }\n\n  function pause(): void {\n    if (!autoplayRunning) return\n    pauseDelay = timeUntilNext()\n    stopAutoplay()\n  }\n\n  function isPlaying(): boolean {\n    return autoplayRunning\n  }\n\n  function next(): void {\n    const { indexCurrent } = emblaApi.internalEngine()\n    const nextIndex = indexCurrent.clone().add(1).get()\n    const lastIndex = emblaApi.snapList().length - 1\n    const kill = options.stopOnLastSnap && nextIndex === lastIndex\n\n    const event = emblaApi.createEvent('autoplay:select', {\n      targetSnap: emblaApi.canGoToNext() ? nextIndex : 0,\n      sourceSnap: indexCurrent.get()\n    })\n\n    if (emblaApi.canGoToNext()) {\n      emblaApi.goToNext(instant)\n    } else {\n      emblaApi.goTo(0, instant)\n    }\n\n    event.emit()\n    pauseDelay = null\n\n    if (kill) return stopAutoplay()\n    startAutoplay()\n  }\n\n  function getDelay(): number {\n    return pauseDelay || delay[emblaApi.selectedSnap()]\n  }\n\n  function timeUntilNext(): number | null {\n    if (!pluginIsActive()) return null\n    if (!timerStartTime) return null\n    const timePastSinceStart = new Date().getTime() - timerStartTime\n    return getDelay() - timePastSinceStart\n  }\n\n  const self: AutoplayType = {\n    name: 'autoplay',\n    options: userOptions,\n    init,\n    destroy,\n    play,\n    stop,\n    reset,\n    pause,\n    isPlaying,\n    timeUntilNext\n  }\n  return self\n}\n\ndeclare namespace Autoplay {\n  let globalOptions: AutoplayOptionsType | undefined\n}\n\nAutoplay.globalOptions = undefined\n\nexport default Autoplay\n"],"names":["defaultOptions","active","breakpoints","delay","instant","defaultInteraction","stopOnLastSnap","rootNode","normalizeDelay","emblaApi","scrollSnaps","snapList","map","getAutoplayRootNode","emblaRootNode","Autoplay","userOptions","options","isSsr","destroyed","pauseDelay","timerStartTime","timerId","autoplayRunning","playOnDocumentVisible","isMouseOver","isPointerDown","onInteraction","onDefaultInteraction","pluginIsActive","init","emblaApiInstance","optionsHandler","mergeOptions","optionsAtMedia","optionsBase","globalOptions","allOptions","internalEngine","length","onCustomInteraction","eventStore","nodeHandler","ownerDocument","root","add","onVisibilityChange","on","event","type","containerNode","destroy","off","stopAutoplay","setTimer","ownerWindow","startTime","Date","getTime","createEvent","clearTimeout","setTimeout","next","getDelay","emit","clearTimer","stopTime","startAutoplay","documentIsHidden","visibilityState","_","originalEvent","customType","interaction","play","instantOverride","stop","reset","pause","timeUntilNext","isPlaying","indexCurrent","nextIndex","clone","get","lastIndex","kill","targetSnap","canGoToNext","sourceSnap","goToNext","goTo","selectedSnap","timePastSinceStart","self","name","undefined"],"mappings":"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"}